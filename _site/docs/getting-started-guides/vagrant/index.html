

<!Doctype html>
<html id="docs">


<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" type="image/png" href="/images/favicon.png">
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Roboto+Mono' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="/css/styles.css"/>
	<script src="/js/jquery-2.2.0.min.js"></script>
	<script src="/js/script.js"></script>
	<title>Kubernetes - Running Kubernetes Locally via Vagrant</title>
</head>
<body>
<div id="cellophane" onclick="kub.toggleMenu()"></div>
<header>
	<a href="/" class="logo"></a>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="/docs/" class="button" id="viewDocs">View Documentation</a>
		<a href="/docs/hellonode/" class="button" id="tryKubernetes">Try Kubernetes</a>
		<button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="/docs/hellonode/">Get Started</a></h3>
				<p>Built for a multi-cloud world, public, private or hybrid. Seamlessly roll out new features.</p>
			</div>
			<div class="nav-box">
				<h3><a href="/docs/">Documentation</a></h3>
				<p>Pellentesque in ipsum id orci porta dapibus. Nulla porttitor accumsan tincidunt. </p>
			</div>
			<div class="nav-box">
				<h3><a href="/community/">Community</a></h3>
				<p>Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. </p>
			</div>
			<div class="nav-box">
				<h3><a href="http://blog.kubernetes.io">Blog</a></h3>
				<p>Curabitur arcu erat, accumsan id imperdiet et, porttitor at sem. Quisque velit nisi, pretium ut lacinia in. </p>
			</div>
		</main>
		<main data-auto-burger="primary">
			<div class="left">
				<h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
				<a href="" class="button">View On Github</a>
			</div>

			<div class="right">
				<h5 class="github-invite">Explore the community</h5>
				<div class="social">
					<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
					<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
					<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
					<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>stackoverflow</span></a>
					<a href="https://groups.google.com/forum/#!forum/google-containers" class="mailing-list"><span>Mailing List</span></a>
					<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
				</div>
			</div>
			<div class="clear" style="clear: both"></div>
		</main>
	</nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
	<h1>Guides</h1>
	<h5>How to get started, and acheive tasks, using Kubernetes</h5>
	<div id="vendorStrip" class="light-text">
		<ul>
			<li><a href="/docs/">GUIDES</a></li>
			<li><a href="/docs/reference">REFERENCE</a></li>
			<li><a href="/docs/samples">SAMPLES</a></li>
			<li><a href="/docs/troubleshooting/">SUPPORT</a></li>
		</ul><!--
		<div class="dropdown">
			<div class="readout"></div>
			<a href="/v1.1/">Version 1.1</a>
            <a href="/v1.2/">Version 1.2</a>
		</div>-->
		<input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
	</div>
</section>

<section id="encyclopedia">
	<div id="docsToc">
        <div class="pi-accordion">
        
    <a class="item" data-title="Guides" href="/docs/"></a>
<div class="item" data-title="Getting Started">
  <div class="container">
    <a class="item" data-title="What is Kubernetes?" href="/docs/whatisk8s/"></a>
    <a class="item" data-title="Downloading Kubernetes" href="/docs/getting-started-guides/binary_release/"></a>
    <a class="item" data-title="Hello World Walkthrough" href="/docs/hellonode/"></a>
    <a class="item" data-title="Kubernetes 101" href="/docs/user-guide/walkthrough/"></a>
    <a class="item" data-title="Kubernetes 201" href="/docs/user-guide/walkthrough/k8s201/"></a>
  </div>
</div>
    <a class="item" data-title="User Guide" href="/docs/user-guide/"></a>
    <a class="item" data-title="Admin Guide" href="/docs/admin/"></a>
<div class="item" data-title="Running Kubernetes">
  <div class="container">
    <a class="item" data-title="Picking the Right Solution" href="/docs/getting-started-guides/"></a>
<div class="item" data-title="Running Kubernetes on Your Local Machine">
  <div class="container">
    <a class="item" data-title="Running Kubernetes Locally via Docker" href="/docs/getting-started-guides/docker/"></a>
    <a class="item" data-title="Running Kubernetes Locally via Vagrant" href="/docs/getting-started-guides/vagrant/"></a>
    <a class="item" data-title="Running Kubernetes Locally with No VM" href="/docs/getting-started-guides/locally/"></a>
  </div>
</div>
<div class="item" data-title="Running Kubernetes on Turn-key Cloud Solutions">
  <div class="container">
    <a class="item" data-title="Running Kubernetes on Google Container Engine" href="https://cloud.google.com/container-engine/docs/before-you-begin/" target='_blank'></a>
    <a class="item" data-title="Running Kubernetes on Google Compute Engine" href="/docs/getting-started-guides/gce/"></a>
    <a class="item" data-title="Running Kubernetes on AWS EC2" href="/docs/getting-started-guides/aws/"></a>
    <a class="item" data-title="Running Kubernetes on Azure" href="/docs/getting-started-guides/coreos/azure/"></a>
  </div>
</div>
<div class="item" data-title="Running Kubernetes on Custom Solutions">
  <div class="container">
    <a class="item" data-title="Getting Started From Scratch" href="/docs/getting-started-guides/scratch/"></a>
<div class="item" data-title="Custom Cloud Solutions">
  <div class="container">
    <a class="item" data-title="AWS or GCE on CoreOS" href="/docs/getting-started-guides/coreos/"></a>
    <a class="item" data-title="AWS or Joyent on Ubuntu" href="/docs/getting-started-guides/juju/"></a>
    <a class="item" data-title="Rackspace on CoreOS" href="/docs/getting-started-guides/rackspace/"></a>
  </div>
</div>
<div class="item" data-title="On-Premise VMs">
  <div class="container">
    <a class="item" data-title="Vagrant or VMware" href="/docs/getting-started-guides/coreos/"></a>
    <a class="item" data-title="Cloudstack" href="/docs/getting-started-guides/cloudstack/"></a>
    <a class="item" data-title="VMWare" href="/docs/getting-started-guides/vsphere/"></a>
    <a class="item" data-title="Juju" href="/docs/getting-started-guides/juju/"></a>
    <a class="item" data-title="DCOS" href="/docs/getting-started-guides/dcos/"></a>
    <a class="item" data-title="libvirt on CoreOS" href="/docs/getting-started-guides/libvirt-coreos/"></a>
    <a class="item" data-title="oVirt" href="/docs/getting-started-guides/ovirt/"></a>
    <a class="item" data-title="libvirt or KVM" href="/docs/getting-started-guides/fedora/flannel_multi_node_cluster/"></a>
    <a class="item" data-title="Multinode Cluster on CoreOS" href="/docs/getting-started-guides/coreos/coreos_multinode_cluster/"></a>
    <a class="item" data-title="Fedora With Calico Networking" href="/docs/getting-started-guides/fedora/fedora-calico/"></a>
    <a class="item" data-title="rkt" href="/docs/getting-started-guides/rkt/"></a>
    <a class="item" data-title="Kubernetes on Mesos" href="/docs/getting-started-guides/mesos/"></a>
    <a class="item" data-title="Kubernetes on Mesos on Docker" href="/docs/getting-started-guides/mesos-docker/"></a>
  </div>
</div>
<div class="item" data-title="Bare Metal">
  <div class="container">
    <a class="item" data-title="Offline" href="/docs/getting-started-guides/coreos/bare_metal_offline/"></a>
    <a class="item" data-title="Fedora via Ansible" href="/docs/getting-started-guides/fedora/fedora_ansible_config/"></a>
    <a class="item" data-title="Fedora (Single Node)" href="/docs/getting-started-guides/fedora/fedora_manual_config/"></a>
    <a class="item" data-title="Fedora (Multi Node)" href="/docs/getting-started-guides/fedora/flannel_multi_node_cluster/"></a>
    <a class="item" data-title="Centos" href="/docs/getting-started-guides/centos/centos_manual_config/"></a>
    <a class="item" data-title="Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    <a class="item" data-title="Docker (Multi-Node)" href="/docs/getting-started-guides/docker-multinode/"></a>
    <a class="item" data-title="CoreOS with Calico" href="/docs/getting-started-guides/coreos/bare_metal_calico/"></a>
    <a class="item" data-title="Ubuntu Nodes with Calico" href="/docs/getting-started-guides/ubuntu-calico/"></a>
  </div>
</div>
  </div>
</div>
  </div>
</div>
<div class="item" data-title="Administering Clusters">
  <div class="container">
    <a class="item" data-title="Cluster Management Guide" href="/docs/admin/cluster-management/"></a>
    <a class="item" data-title="Anatomy of a Cluster" href="/docs/admin/cluster-components/"></a>
    <a class="item" data-title="Using Multiple Clusters" href="/docs/admin/multi-cluster/"></a>
    <a class="item" data-title="Using Large Clusters" href="/docs/admin/cluster-large/"></a>
    <a class="item" data-title="Building High-Availability Clusters" href="/docs/admin/high-availability/"></a>
    <a class="item" data-title="Accessing Clusters" href="/docs/user-guide/accessing-the-cluster/"></a>
    <a class="item" data-title="Sharing a Cluster" href="/docs/admin/namespaces/"></a>
    <a class="item" data-title="Changing Cluster Size" href="https://github.com/kubernetes/kubernetes/wiki/User-FAQ#how-do-i-change-the-size-of-my-cluster/" target='_blank'></a>
    <a class="item" data-title="Creating a Custom Cluster from Scratch" href="/docs/getting-started-guides/scratch/"></a>
    <a class="item" data-title="Authenticating Across Clusters with kubeconfig" href="/docs/user-guide/kubeconfig-file/"></a>
  </div>
</div>
<div class="item" data-title="Using Nodes, Pods, and Containers">
  <div class="container">
    <a class="item" data-title="The Container Environment" href="/docs/user-guide/container-environment/"></a>
    <a class="item" data-title="Running Your First Containers" href="/docs/user-guide/simple-nginx/"></a>
    <a class="item" data-title="Working with Containers" href="/docs/user-guide/production-pods/"></a>
    <a class="item" data-title="Overriding Default Container Behavior" href="/docs/user-guide/containers/"></a>
    <a class="item" data-title="Running Commands in a Container with kubectl exec" href="/docs/user-guide/getting-into-containers/"></a>
    <a class="item" data-title="The Lifecycle of a Pod" href="/docs/user-guide/pod-states/"></a>
    <a class="item" data-title="Assigning Pods to Nodes" href="/docs/user-guide/node-selection/"></a>
    <a class="item" data-title="Creating Pods with the Downward API" href="/docs/user-guide/downward-api/"></a>
    <a class="item" data-title="Updating Live Pods" href="/docs/user-guide/update-demo/"></a>
    <a class="item" data-title="Installing a Kubernetes Master Node via Docker" href="/docs/getting-started-guides/docker-multinode/master/"></a>
    <a class="item" data-title="Adding a Kubernetes Worker Node via Docker" href="/docs/getting-started-guides/docker-multinode/worker/"></a>
  </div>
</div>
<div class="item" data-title="Networking">
  <div class="container">
    <a class="item" data-title="Networking in Kubernetes" href="/docs/admin/networking/"></a>
    <a class="item" data-title="Using DNS Pods and Services" href="/docs/admin/dns/"></a>
    <a class="item" data-title="Setting Up and Configuring DNS" href="https://github.com/kubernetes/kubernetes/tree/release-1.1/examples/cluster-dns" target='_blank'></a>
    <a class="item" data-title="Deploying DNS" href="/docs/getting-started-guides/docker-multinode/deployDNS/"></a>
    <a class="item" data-title="Connecting Applications" href="/docs/user-guide/connecting-applications/"></a>
    <a class="item" data-title="Creating Servers with External IPs" href="https://github.com/kubernetes/kubernetes/blob/release-1.1/examples/simple-nginx.md" target='_blank'></a>
    <a class="item" data-title="Connect with Proxies" href="/docs/user-guide/connecting-to-applications-proxy/"></a>
    <a class="item" data-title="Connect with Port Forwarding" href="/docs/user-guide/connecting-to-applications-port-forward/"></a>
    <a class="item" data-title="Configuring Your Cloud Provider's Firewalls" href="/docs/user-guide/services-firewalls/"></a>
  </div>
</div>
<div class="item" data-title="Configuring Kubernetes">
  <div class="container">
    <a class="item" data-title="Using Configuration Files" href="/docs/user-guide/simple-yaml/"></a>
    <a class="item" data-title="Best Practices for Configuration" href="/docs/user-guide/config-best-practices/"></a>
    <a class="item" data-title="Configuring Containers" href="/docs/user-guide/configuring-containers/"></a>
    <a class="item" data-title="Sharing Cluster Access with kubeconfig" href="/docs/user-guide/sharing-clusters/"></a>
    <a class="item" data-title="Using Environment Variables" href="/docs/user-guide/environment-guide/"></a>
    <a class="item" data-title="Managing Compute Resources" href="/docs/user-guide/compute-resources/"></a>
    <a class="item" data-title="Using kubectl to Manage Resources" href="/docs/user-guide/working-with-resources/"></a>
    <a class="item" data-title="Applying Resource Quotas and Limits" href="/docs/admin/resourcequota/"></a>
    <a class="item" data-title="Setting Pod CPU and Memory Limits" href="/docs/admin/limitrange/"></a>
    <a class="item" data-title="Configuring Garbage Collection" href="/docs/admin/garbage-collection/"></a>
    <a class="item" data-title="Configuring Kubernetes with Salt" href="/docs/admin/salt/"></a>
    <a class="item" data-title="Configuring Kubernetes Use of etcd" href="/docs/admin/etcd/"></a>
  </div>
</div>
<div class="item" data-title="Application Management and Deployment">
  <div class="container">
    <a class="item" data-title="Managing Applications: Prerequisites" href="/docs/user-guide/prereqs/"></a>
    <a class="item" data-title="Managing Deployments" href="/docs/user-guide/managing-deployments/"></a>
    <a class="item" data-title="Deploying Applications" href="/docs/user-guide/deploying-applications/"></a>
    <a class="item" data-title="Launching, Exposing, and Killing Applications" href="/docs/user-guide/quick-start/"></a>
  </div>
</div>
<div class="item" data-title="Testing and Monitoring">
  <div class="container">
    <a class="item" data-title="Testing a Kubernetes Cluster" href="/docs/getting-started-guides/docker-multinode/testing/"></a>
    <a class="item" data-title="Simulating Large Test Loads" href="https://github.com/kubernetes/kubernetes/tree/release-1.1/examples/k8petstore" target='_blank'></a>
    <a class="item" data-title="Checking Pod Health" href="/docs/user-guide/liveness/"></a>
    <a class="item" data-title="Using Explorer to Examine the Runtime Environment" href="https://github.com/kubernetes/kubernetes/tree/release-1.1/examples/explorer" target='_blank'></a>
    <a class="item" data-title="Resource Usage Monitoring" href="/docs/user-guide/monitoring/"></a>
    <a class="item" data-title="Logging" href="/docs/getting-started-guides/logging/"></a>
    <a class="item" data-title="Logging with Elasticsearch and Kibana" href="/docs/getting-started-guides/logging-elasticsearch/"></a>
  </div>
</div>
        </div> <!-- /pi-accordion -->
	</div> <!-- /docsToc -->
	<div id="docsContent">
        <p><a href="/docs/editdocs#docs/getting-started-guides/vagrant.md" id="editPageButton">Edit This Page</a></p>
    	<h1>Running Kubernetes Locally via Vagrant</h1>
		<p>Running Kubernetes with Vagrant (and VirtualBox) is an easy way to run/test/develop on your local machine (Linux, Mac OS X).</p>

<ul id="markdown-toc">
  <li><a href="#prerequisites" id="markdown-toc-prerequisites">Prerequisites</a></li>
  <li><a href="#setup" id="markdown-toc-setup">Setup</a></li>
  <li><a href="#interacting-with-your-kubernetes-cluster-with-vagrant" id="markdown-toc-interacting-with-your-kubernetes-cluster-with-vagrant">Interacting with your Kubernetes cluster with Vagrant.</a></li>
  <li><a href="#authenticating-with-your-master" id="markdown-toc-authenticating-with-your-master">Authenticating with your master</a></li>
  <li><a href="#running-containers" id="markdown-toc-running-containers">Running containers</a></li>
  <li><a href="#troubleshooting" id="markdown-toc-troubleshooting">Troubleshooting</a>    <ul>
      <li><a href="#i-keep-downloading-the-same-large-box-all-the-time" id="markdown-toc-i-keep-downloading-the-same-large-box-all-the-time">I keep downloading the same (large) box all the time!</a></li>
      <li><a href="#i-just-created-the-cluster-but-i-am-getting-authorization-errors" id="markdown-toc-i-just-created-the-cluster-but-i-am-getting-authorization-errors">I just created the cluster, but I am getting authorization errors!</a></li>
      <li><a href="#i-just-created-the-cluster-but-i-do-not-see-my-container-running" id="markdown-toc-i-just-created-the-cluster-but-i-do-not-see-my-container-running">I just created the cluster, but I do not see my container running!</a></li>
      <li><a href="#i-want-to-make-changes-to-kubernetes-code" id="markdown-toc-i-want-to-make-changes-to-kubernetes-code">I want to make changes to Kubernetes code!</a></li>
      <li><a href="#i-have-brought-vagrant-up-but-the-nodes-cannot-validate" id="markdown-toc-i-have-brought-vagrant-up-but-the-nodes-cannot-validate">I have brought Vagrant up but the nodes cannot validate!</a></li>
      <li><a href="#i-want-to-change-the-number-of-nodes" id="markdown-toc-i-want-to-change-the-number-of-nodes">I want to change the number of nodes!</a></li>
      <li><a href="#i-want-my-vms-to-have-more-memory" id="markdown-toc-i-want-my-vms-to-have-more-memory">I want my VMs to have more memory!</a></li>
      <li><a href="#i-ran-vagrant-suspend-and-nothing-works" id="markdown-toc-i-ran-vagrant-suspend-and-nothing-works">I ran vagrant suspend and nothing works!</a></li>
      <li><a href="#i-want-vagrant-to-sync-folders-via-nfs" id="markdown-toc-i-want-vagrant-to-sync-folders-via-nfs">I want vagrant to sync folders via nfs!</a></li>
    </ul>
  </li>
</ul>

<h3 id="prerequisites">Prerequisites</h3>

<ol>
  <li>Install latest version &gt;= 1.6.2 of vagrant from http://www.vagrantup.com/downloads.html</li>
  <li>Install one of:
    <ol>
      <li>Version 4.3.28 of Virtual Box from https://www.virtualbox.org/wiki/Download_Old_Builds_4_3</li>
      <li><a href="https://www.vmware.com/products/fusion/">VMWare Fusion</a> version 5 or greater as well as the appropriate <a href="https://www.vagrantup.com/vmware">Vagrant VMWare Fusion provider</a></li>
      <li><a href="https://www.vmware.com/products/workstation/">VMWare Workstation</a> version 9 or greater as well as the <a href="https://www.vagrantup.com/vmware">Vagrant VMWare Workstation provider</a></li>
      <li><a href="https://www.parallels.com/products/desktop/">Parallels Desktop</a> version 9 or greater as well as the <a href="https://parallels.github.io/vagrant-parallels/">Vagrant Parallels provider</a></li>
      <li>libvirt with KVM and enable support of hardware virtualisation. <a href="https://github.com/pradels/vagrant-libvirt">Vagrant-libvirt</a>. For fedora provided official rpm, and possible to use <code class="highlighter-rouge">yum install vagrant-libvirt</code></li>
    </ol>
  </li>
</ol>

<h3 id="setup">Setup</h3>

<p>Setting up a cluster is as simple as running:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>vagrant
curl -sS https://get.k8s.io | bash
</code></pre>
</div>

<p>Alternatively, you can download <a href="https://github.com/kubernetes/kubernetes/releases">Kubernetes release</a> and extract the archive. To start your local cluster, open a shell and run:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nb">cd </span>kubernetes

<span class="nb">export </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>vagrant
./cluster/kube-up.sh
</code></pre>
</div>

<p>The <code class="highlighter-rouge">KUBERNETES_PROVIDER</code> environment variable tells all of the various cluster management scripts which variant to use.  If you forget to set this, the assumption is you are running on Google Compute Engine.</p>

<p>By default, the Vagrant setup will create a single master VM (called kubernetes-master) and one node (called kubernetes-minion-1). Each VM will take 1 GB, so make sure you have at least 2GB to 4GB of free memory (plus appropriate free disk space).</p>

<p>Vagrant will provision each machine in the cluster with all the necessary components to run Kubernetes.  The initial setup can take a few minutes to complete on each machine.</p>

<p>If you installed more than one Vagrant provider, Kubernetes will usually pick the appropriate one. However, you can override which one Kubernetes will use by setting the <a href="https://docs.vagrantup.com/v2/providers/default"><code class="highlighter-rouge">VAGRANT_DEFAULT_PROVIDER</code></a> environment variable:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">VAGRANT_DEFAULT_PROVIDER</span><span class="o">=</span>parallels
<span class="nb">export </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>vagrant
./cluster/kube-up.sh
</code></pre>
</div>

<p>By default, each VM in the cluster is running Fedora.</p>

<p>To access the master or any node:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>vagrant ssh master
vagrant ssh minion-1
</code></pre>
</div>

<p>If you are running more than one node, you can access the others by:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>vagrant ssh minion-2
vagrant ssh minion-3
</code></pre>
</div>

<p>Each node in the cluster installs the docker daemon and the kubelet.</p>

<p>The master node instantiates the Kubernetes master components as pods on the machine.</p>

<p>To view the service status and/or logs on the kubernetes-master:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>vagrant@kubernetes-master ~] <span class="nv">$ </span>vagrant ssh master
<span class="o">[</span>vagrant@kubernetes-master ~] <span class="nv">$ </span>sudo su

<span class="o">[</span>root@kubernetes-master ~] <span class="nv">$ </span>systemctl status kubelet
<span class="o">[</span>root@kubernetes-master ~] <span class="nv">$ </span>journalctl -ru kubelet

<span class="o">[</span>root@kubernetes-master ~] <span class="nv">$ </span>systemctl status docker
<span class="o">[</span>root@kubernetes-master ~] <span class="nv">$ </span>journalctl -ru docker

<span class="o">[</span>root@kubernetes-master ~] <span class="nv">$ </span>tail -f /var/log/kube-apiserver.log
<span class="o">[</span>root@kubernetes-master ~] <span class="nv">$ </span>tail -f /var/log/kube-controller-manager.log
<span class="o">[</span>root@kubernetes-master ~] <span class="nv">$ </span>tail -f /var/log/kube-scheduler.log
</code></pre>
</div>

<p>To view the services on any of the nodes:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>vagrant@kubernetes-master ~] <span class="nv">$ </span>vagrant ssh minion-1
<span class="o">[</span>vagrant@kubernetes-master ~] <span class="nv">$ </span>sudo su

<span class="o">[</span>root@kubernetes-master ~] <span class="nv">$ </span>systemctl status kubelet
<span class="o">[</span>root@kubernetes-master ~] <span class="nv">$ </span>journalctl -ru kubelet

<span class="o">[</span>root@kubernetes-master ~] <span class="nv">$ </span>systemctl status docker
<span class="o">[</span>root@kubernetes-master ~] <span class="nv">$ </span>journalctl -ru docker
</code></pre>
</div>

<h3 id="interacting-with-your-kubernetes-cluster-with-vagrant">Interacting with your Kubernetes cluster with Vagrant.</h3>

<p>With your Kubernetes cluster up, you can manage the nodes in your cluster with the regular Vagrant commands.</p>

<p>To push updates to new Kubernetes code after making source changes:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>./cluster/kube-push.sh
</code></pre>
</div>

<p>To stop and then restart the cluster:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>vagrant halt
./cluster/kube-up.sh
</code></pre>
</div>

<p>To destroy the cluster:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>vagrant destroy
</code></pre>
</div>

<p>Once your Vagrant machines are up and provisioned, the first thing to do is to check that you can use the <code class="highlighter-rouge">kubectl.sh</code> script.</p>

<p>You may need to build the binaries first, you can do this with <code class="highlighter-rouge">make</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./cluster/kubectl.sh get nodes

NAME                LABELS
10.245.1.4          &lt;none&gt;
10.245.1.5          &lt;none&gt;
10.245.1.3          &lt;none&gt;
</code></pre>
</div>

<h3 id="authenticating-with-your-master">Authenticating with your master</h3>

<p>When using the vagrant provider in Kubernetes, the <code class="highlighter-rouge">cluster/kubectl.sh</code> script will cache your credentials in a <code class="highlighter-rouge">~/.kubernetes_vagrant_auth</code> file so you will not be prompted for them in the future.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cat ~/.kubernetes_vagrant_auth
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w"> </span><span class="nt">"User"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vagrant"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"Password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vagrant"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"CAFile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/home/k8s_user/.kubernetes.vagrant.ca.crt"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"CertFile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/home/k8s_user/.kubecfg.vagrant.crt"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"KeyFile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/home/k8s_user/.kubecfg.vagrant.key"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>You should now be set to use the <code class="highlighter-rouge">cluster/kubectl.sh</code> script. For example try to list the nodes that you have started with:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>./cluster/kubectl.sh get nodes
</code></pre>
</div>

<h3 id="running-containers">Running containers</h3>

<p>Your cluster is running, you can list the nodes in your cluster:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./cluster/kubectl.sh get nodes

NAME                 LABELS
10.245.2.4           &lt;none&gt;
10.245.2.3           &lt;none&gt;
10.245.2.2           &lt;none&gt;
</code></pre>
</div>

<p>Now start running some containers!</p>

<p>You can now use any of the <code class="highlighter-rouge">cluster/kube-*.sh</code> commands to interact with your VM machines.
Before starting a container there will be no pods, services and replication controllers.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./cluster/kubectl.sh get pods
NAME        READY     STATUS    RESTARTS   AGE

<span class="gp">$ </span>./cluster/kubectl.sh get services
NAME              CLUSTER_IP       EXTERNAL_IP       PORT<span class="o">(</span>S<span class="o">)</span>       SELECTOR               AGE

<span class="gp">$ </span>./cluster/kubectl.sh get replicationcontrollers
CONTROLLER   CONTAINER<span class="o">(</span>S<span class="o">)</span>   IMAGE<span class="o">(</span>S<span class="o">)</span>   SELECTOR   REPLICAS
</code></pre>
</div>

<p>Start a container running nginx with a replication controller and three replicas</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./cluster/kubectl.sh run my-nginx --image<span class="o">=</span>nginx --replicas<span class="o">=</span>3 --port<span class="o">=</span>80
</code></pre>
</div>

<p>When listing the pods, you will see that three containers have been started and are in Waiting state:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./cluster/kubectl.sh get pods
NAME             READY     STATUS    RESTARTS   AGE
my-nginx-5kq0g   0/1       Pending   0          10s
my-nginx-gr3hh   0/1       Pending   0          10s
my-nginx-xql4j   0/1       Pending   0          10s
</code></pre>
</div>

<p>You need to wait for the provisioning to complete, you can monitor the nodes by doing:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>vagrant ssh minion-1 -c <span class="s1">'sudo docker images'</span>
kubernetes-minion-1:
    REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
    &lt;none&gt;              &lt;none&gt;              96864a7d2df3        26 hours ago        204.4 MB
    google/cadvisor     latest              e0575e677c50        13 days ago         12.64 MB
    kubernetes/pause    latest              6c4579af347b        8 weeks ago         239.8 kB
</code></pre>
</div>

<p>Once the docker image for nginx has been downloaded, the container will start and you can list it:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>vagrant ssh minion-1 -c <span class="s1">'sudo docker ps'</span>
kubernetes-minion-1:
    CONTAINER ID        IMAGE                     COMMAND                CREATED             STATUS              PORTS                    NAMES
    dbe79bf6e25b        nginx:latest              <span class="s2">"nginx"</span>                21 seconds ago      Up 19 seconds                                k8s--mynginx.8c5b8a3a--7813c8bd_-_3ffe_-_11e4_-_9036_-_0800279696e1.etcd--7813c8bd_-_3ffe_-_11e4_-_9036_-_0800279696e1--fcfa837f
    fa0e29c94501        kubernetes/pause:latest   <span class="s2">"/pause"</span>               8 minutes ago       Up 8 minutes        0.0.0.0:8080-&gt;80/tcp     k8s--net.a90e7ce4--7813c8bd_-_3ffe_-_11e4_-_9036_-_0800279696e1.etcd--7813c8bd_-_3ffe_-_11e4_-_9036_-_0800279696e1--baf5b21b
    aa2ee3ed844a        google/cadvisor:latest    <span class="s2">"/usr/bin/cadvisor"</span>    38 minutes ago      Up 38 minutes                                k8s--cadvisor.9e90d182--cadvisor_-_agent.file--4626b3a2
    65a3a926f357        kubernetes/pause:latest   <span class="s2">"/pause"</span>               39 minutes ago      Up 39 minutes       0.0.0.0:4194-&gt;8080/tcp   k8s--net.c5ba7f0e--cadvisor_-_agent.file--342fd561
</code></pre>
</div>

<p>Going back to listing the pods, services and replicationcontrollers, you now have:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./cluster/kubectl.sh get pods
NAME             READY     STATUS    RESTARTS   AGE
my-nginx-5kq0g   1/1       Running   0          1m
my-nginx-gr3hh   1/1       Running   0          1m
my-nginx-xql4j   1/1       Running   0          1m

<span class="gp">$ </span>./cluster/kubectl.sh get services
NAME              CLUSTER_IP       EXTERNAL_IP       PORT<span class="o">(</span>S<span class="o">)</span>       SELECTOR               AGE
my-nginx          10.0.0.1         &lt;none&gt;            80/TCP        <span class="nv">run</span><span class="o">=</span>my-nginx           1h
</code></pre>
</div>

<p>We did not start any services, hence there are none listed. But we see three replicas displayed properly.
Check the <a href="https://github.com/kubernetes/kubernetes/tree/release-1.1/examples/guestbook/">guestbook</a> application to learn how to create a service.
You can already play with scaling the replicas with:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./cluster/kubectl.sh scale rc my-nginx --replicas<span class="o">=</span>2
<span class="gp">$ </span>./cluster/kubectl.sh get pods
NAME             READY     STATUS    RESTARTS   AGE
my-nginx-5kq0g   1/1       Running   0          2m
my-nginx-gr3hh   1/1       Running   0          2m
</code></pre>
</div>

<p>Congratulations!</p>

<h3 id="troubleshooting">Troubleshooting</h3>

<h4 id="i-keep-downloading-the-same-large-box-all-the-time">I keep downloading the same (large) box all the time!</h4>

<p>By default the Vagrantfile will download the box from S3. You can change this (and cache the box locally) by providing a name and an alternate URL when calling <code class="highlighter-rouge">kube-up.sh</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">KUBERNETES_BOX_NAME</span><span class="o">=</span>choose_your_own_name_for_your_kuber_box
<span class="nb">export </span><span class="nv">KUBERNETES_BOX_URL</span><span class="o">=</span>path_of_your_kuber_box
<span class="nb">export </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>vagrant
./cluster/kube-up.sh
</code></pre>
</div>

<h4 id="i-just-created-the-cluster-but-i-am-getting-authorization-errors">I just created the cluster, but I am getting authorization errors!</h4>

<p>You probably have an incorrect ~/.kubernetes_vagrant_auth file for the cluster you are attempting to contact.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>rm ~/.kubernetes_vagrant_auth
</code></pre>
</div>

<p>After using kubectl.sh make sure that the correct credentials are set:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cat ~/.kubernetes_vagrant_auth
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"User"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vagrant"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"Password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vagrant"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="i-just-created-the-cluster-but-i-do-not-see-my-container-running">I just created the cluster, but I do not see my container running!</h4>

<p>If this is your first time creating the cluster, the kubelet on each node schedules a number of docker pull requests to fetch prerequisite images.  This can take some time and as a result may delay your initial pod getting provisioned.</p>

<h4 id="i-want-to-make-changes-to-kubernetes-code">I want to make changes to Kubernetes code!</h4>

<p>To set up a vagrant cluster for hacking, follow the <a href="https://github.com/kubernetes/kubernetes/tree/release-1.1/docs/devel/developer-guides/vagrant.md">vagrant developer guide</a>.</p>

<h4 id="i-have-brought-vagrant-up-but-the-nodes-cannot-validate">I have brought Vagrant up but the nodes cannot validate!</h4>

<p>Log on to one of the nodes (<code class="highlighter-rouge">vagrant ssh minion-1</code>) and inspect the salt minion log (<code class="highlighter-rouge">sudo cat /var/log/salt/minion</code>).</p>

<h4 id="i-want-to-change-the-number-of-nodes">I want to change the number of nodes!</h4>

<p>You can control the number of nodes that are instantiated via the environment variable <code class="highlighter-rouge">NUM_MINIONS</code> on your host machine.  If you plan to work with replicas, we strongly encourage you to work with enough nodes to satisfy your largest intended replica size.  If you do not plan to work with replicas, you can save some system resources by running with a single node. You do this, by setting <code class="highlighter-rouge">NUM_MINIONS</code> to 1 like so:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">NUM_MINIONS</span><span class="o">=</span>1
</code></pre>
</div>

<h4 id="i-want-my-vms-to-have-more-memory">I want my VMs to have more memory!</h4>

<p>You can control the memory allotted to virtual machines with the <code class="highlighter-rouge">KUBERNETES_MEMORY</code> environment variable.
Just set it to the number of megabytes you would like the machines to have. For example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">KUBERNETES_MEMORY</span><span class="o">=</span>2048
</code></pre>
</div>

<p>If you need more granular control, you can set the amount of memory for the master and nodes independently. For example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">KUBERNETES_MASTER_MEMORY</span><span class="o">=</span>1536
<span class="nb">export </span><span class="nv">KUBERNETES_MINION_MEMORY</span><span class="o">=</span>2048
</code></pre>
</div>

<h4 id="i-ran-vagrant-suspend-and-nothing-works">I ran vagrant suspend and nothing works!</h4>

<p><code class="highlighter-rouge">vagrant suspend</code> seems to mess up the network.  This is not supported at this time.</p>

<h4 id="i-want-vagrant-to-sync-folders-via-nfs">I want vagrant to sync folders via nfs!</h4>

<p>You can ensure that vagrant uses nfs to sync folders with virtual machines by setting the KUBERNETES_VAGRANT_USE_NFS environment variable to ‘true’. nfs is faster than virtualbox or vmware’s ‘shared folders’ and does not require guest additions. See the <a href="http://docs.vagrantup.com/v2/synced-folders/nfs">vagrant docs</a> for details on configuring nfs on the host. This setting will have no effect on the libvirt provider, which uses nfs by default. For example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">KUBERNETES_VAGRANT_USE_NFS</span><span class="o">=</span><span class="nb">true</span>
</code></pre>
</div>

        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/getting-started-guides/vagrant.md?pixel" alt="Analytics" /></a>
        <div id="pd_rating_holder_8345992"></div>
		<script type="text/javascript">
        PDRTJS_settings_8345992 = {
        "id" : "8345992",
        "unique_id" : "/docs/getting-started-guides/vagrant/",
        "title" : "Running Kubernetes Locally via Vagrant",
        "permalink" : "http://kubernetes.github.io/docs/getting-started-guides/vagrant/"
        };
        (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
	</div>
</section>

<footer>
	<main class="light-text">
		<nav>
			<a href="/docs/hellonode/">Get Started</a>
			<a href="/docs/">Documentation</a>
			<a href="http://blog.kubernetes.io/">Blog</a>
			<a href="/community/">Community</a>
		</nav>
		<div class="social">
			<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
			<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
			<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
			<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>stackoverflow</span></a>
			<a href="https://groups.google.com/forum/#!forum/google-containers" class="mailing-list"><span>Mailing List</span></a>
			<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
			<label for="wishField">I wish this page <input type="text" id="wishField" name="wishField" placeholder="enter your wish"></label>
		</div>
		<div class="center">&copy; 2016 Kubernetes</div>
	</main>
</footer>



<style>
	.cse .gsc-control-cse, .gsc-control-cse {
		padding: 0;
	}

	.gsc-above-wrapper-area {
		border-bottom: 0;
	}
</style>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36037335-10', 'auto');
  ga('send', 'pageview');
</script>
<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
<!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->
-->
</body>
</html>