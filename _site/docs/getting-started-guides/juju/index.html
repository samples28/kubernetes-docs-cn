

<!Doctype html>
<html id="docs">


<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" type="image/png" href="/images/favicon.png">
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Roboto+Mono' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="/css/styles.css"/>
	<script src="/js/jquery-2.2.0.min.js"></script>
	<script src="/js/script.js"></script>
	<title>Kubernetes - Juju</title>
</head>
<body>
<div id="cellophane" onclick="kub.toggleMenu()"></div>
<header>
	<a href="/" class="logo"></a>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="/docs/" class="button" id="viewDocs">View Documentation</a>
		<a href="/docs/hellonode/" class="button" id="tryKubernetes">Try Kubernetes</a>
		<button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="/docs/hellonode/">Get Started</a></h3>
				<p>Built for a multi-cloud world, public, private or hybrid. Seamlessly roll out new features.</p>
			</div>
			<div class="nav-box">
				<h3><a href="/docs/">Documentation</a></h3>
				<p>Pellentesque in ipsum id orci porta dapibus. Nulla porttitor accumsan tincidunt. </p>
			</div>
			<div class="nav-box">
				<h3><a href="/community/">Community</a></h3>
				<p>Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. </p>
			</div>
			<div class="nav-box">
				<h3><a href="http://blog.kubernetes.io">Blog</a></h3>
				<p>Curabitur arcu erat, accumsan id imperdiet et, porttitor at sem. Quisque velit nisi, pretium ut lacinia in. </p>
			</div>
		</main>
		<main data-auto-burger="primary">
			<div class="left">
				<h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
				<a href="" class="button">View On Github</a>
			</div>

			<div class="right">
				<h5 class="github-invite">Explore the community</h5>
				<div class="social">
					<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
					<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
					<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
					<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>stackoverflow</span></a>
					<a href="https://groups.google.com/forum/#!forum/google-containers" class="mailing-list"><span>Mailing List</span></a>
					<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
				</div>
			</div>
			<div class="clear" style="clear: both"></div>
		</main>
	</nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
	<h1>Guides</h1>
	<h5>How to get started, and acheive tasks, using Kubernetes</h5>
	<div id="vendorStrip" class="light-text">
		<ul>
			<li><a href="/docs/">GUIDES</a></li>
			<li><a href="/docs/reference">REFERENCE</a></li>
			<li><a href="/docs/samples">SAMPLES</a></li>
			<li><a href="/docs/troubleshooting/">SUPPORT</a></li>
		</ul><!--
		<div class="dropdown">
			<div class="readout"></div>
			<a href="/v1.1/">Version 1.1</a>
            <a href="/v1.2/">Version 1.2</a>
		</div>-->
		<input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
	</div>
</section>

<section id="encyclopedia">
	<div id="docsToc">
        <div class="pi-accordion">
        
    <a class="item" data-title="Guides" href="/docs/"></a>
<div class="item" data-title="Getting Started">
  <div class="container">
    <a class="item" data-title="What is Kubernetes?" href="/docs/whatisk8s/"></a>
    <a class="item" data-title="Downloading Kubernetes" href="/docs/getting-started-guides/binary_release/"></a>
    <a class="item" data-title="Hello World Walkthrough" href="/docs/hellonode/"></a>
    <a class="item" data-title="Kubernetes 101" href="/docs/user-guide/walkthrough/"></a>
    <a class="item" data-title="Kubernetes 201" href="/docs/user-guide/walkthrough/k8s201/"></a>
  </div>
</div>
    <a class="item" data-title="User Guide" href="/docs/user-guide/"></a>
    <a class="item" data-title="Admin Guide" href="/docs/admin/"></a>
<div class="item" data-title="Running Kubernetes">
  <div class="container">
    <a class="item" data-title="Picking the Right Solution" href="/docs/getting-started-guides/"></a>
<div class="item" data-title="Running Kubernetes on Your Local Machine">
  <div class="container">
    <a class="item" data-title="Running Kubernetes Locally via Docker" href="/docs/getting-started-guides/docker/"></a>
    <a class="item" data-title="Running Kubernetes Locally via Vagrant" href="/docs/getting-started-guides/vagrant/"></a>
    <a class="item" data-title="Running Kubernetes Locally with No VM" href="/docs/getting-started-guides/locally/"></a>
  </div>
</div>
<div class="item" data-title="Running Kubernetes on Turn-key Cloud Solutions">
  <div class="container">
    <a class="item" data-title="Running Kubernetes on Google Container Engine" href="https://cloud.google.com/container-engine/docs/before-you-begin/" target='_blank'></a>
    <a class="item" data-title="Running Kubernetes on Google Compute Engine" href="/docs/getting-started-guides/gce/"></a>
    <a class="item" data-title="Running Kubernetes on AWS EC2" href="/docs/getting-started-guides/aws/"></a>
    <a class="item" data-title="Running Kubernetes on Azure" href="/docs/getting-started-guides/coreos/azure/"></a>
  </div>
</div>
<div class="item" data-title="Running Kubernetes on Custom Solutions">
  <div class="container">
    <a class="item" data-title="Getting Started From Scratch" href="/docs/getting-started-guides/scratch/"></a>
<div class="item" data-title="Custom Cloud Solutions">
  <div class="container">
    <a class="item" data-title="AWS or GCE on CoreOS" href="/docs/getting-started-guides/coreos/"></a>
    <a class="item" data-title="AWS or Joyent on Ubuntu" href="/docs/getting-started-guides/juju/"></a>
    <a class="item" data-title="Rackspace on CoreOS" href="/docs/getting-started-guides/rackspace/"></a>
  </div>
</div>
<div class="item" data-title="On-Premise VMs">
  <div class="container">
    <a class="item" data-title="Vagrant or VMware" href="/docs/getting-started-guides/coreos/"></a>
    <a class="item" data-title="Cloudstack" href="/docs/getting-started-guides/cloudstack/"></a>
    <a class="item" data-title="VMWare" href="/docs/getting-started-guides/vsphere/"></a>
    <a class="item" data-title="Juju" href="/docs/getting-started-guides/juju/"></a>
    <a class="item" data-title="DCOS" href="/docs/getting-started-guides/dcos/"></a>
    <a class="item" data-title="libvirt on CoreOS" href="/docs/getting-started-guides/libvirt-coreos/"></a>
    <a class="item" data-title="oVirt" href="/docs/getting-started-guides/ovirt/"></a>
    <a class="item" data-title="libvirt or KVM" href="/docs/getting-started-guides/fedora/flannel_multi_node_cluster/"></a>
    <a class="item" data-title="Multinode Cluster on CoreOS" href="/docs/getting-started-guides/coreos/coreos_multinode_cluster/"></a>
    <a class="item" data-title="Fedora With Calico Networking" href="/docs/getting-started-guides/fedora/fedora-calico/"></a>
    <a class="item" data-title="rkt" href="/docs/getting-started-guides/rkt/"></a>
    <a class="item" data-title="Kubernetes on Mesos" href="/docs/getting-started-guides/mesos/"></a>
    <a class="item" data-title="Kubernetes on Mesos on Docker" href="/docs/getting-started-guides/mesos-docker/"></a>
  </div>
</div>
<div class="item" data-title="Bare Metal">
  <div class="container">
    <a class="item" data-title="Offline" href="/docs/getting-started-guides/coreos/bare_metal_offline/"></a>
    <a class="item" data-title="Fedora via Ansible" href="/docs/getting-started-guides/fedora/fedora_ansible_config/"></a>
    <a class="item" data-title="Fedora (Single Node)" href="/docs/getting-started-guides/fedora/fedora_manual_config/"></a>
    <a class="item" data-title="Fedora (Multi Node)" href="/docs/getting-started-guides/fedora/flannel_multi_node_cluster/"></a>
    <a class="item" data-title="Centos" href="/docs/getting-started-guides/centos/centos_manual_config/"></a>
    <a class="item" data-title="Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    <a class="item" data-title="Docker (Multi-Node)" href="/docs/getting-started-guides/docker-multinode/"></a>
    <a class="item" data-title="CoreOS with Calico" href="/docs/getting-started-guides/coreos/bare_metal_calico/"></a>
    <a class="item" data-title="Ubuntu Nodes with Calico" href="/docs/getting-started-guides/ubuntu-calico/"></a>
  </div>
</div>
  </div>
</div>
  </div>
</div>
<div class="item" data-title="Administering Clusters">
  <div class="container">
    <a class="item" data-title="Cluster Management Guide" href="/docs/admin/cluster-management/"></a>
    <a class="item" data-title="Anatomy of a Cluster" href="/docs/admin/cluster-components/"></a>
    <a class="item" data-title="Using Multiple Clusters" href="/docs/admin/multi-cluster/"></a>
    <a class="item" data-title="Using Large Clusters" href="/docs/admin/cluster-large/"></a>
    <a class="item" data-title="Building High-Availability Clusters" href="/docs/admin/high-availability/"></a>
    <a class="item" data-title="Accessing Clusters" href="/docs/user-guide/accessing-the-cluster/"></a>
    <a class="item" data-title="Sharing a Cluster" href="/docs/admin/namespaces/"></a>
    <a class="item" data-title="Changing Cluster Size" href="https://github.com/kubernetes/kubernetes/wiki/User-FAQ#how-do-i-change-the-size-of-my-cluster/" target='_blank'></a>
    <a class="item" data-title="Creating a Custom Cluster from Scratch" href="/docs/getting-started-guides/scratch/"></a>
    <a class="item" data-title="Authenticating Across Clusters with kubeconfig" href="/docs/user-guide/kubeconfig-file/"></a>
  </div>
</div>
<div class="item" data-title="Using Nodes, Pods, and Containers">
  <div class="container">
    <a class="item" data-title="The Container Environment" href="/docs/user-guide/container-environment/"></a>
    <a class="item" data-title="Running Your First Containers" href="/docs/user-guide/simple-nginx/"></a>
    <a class="item" data-title="Working with Containers" href="/docs/user-guide/production-pods/"></a>
    <a class="item" data-title="Overriding Default Container Behavior" href="/docs/user-guide/containers/"></a>
    <a class="item" data-title="Running Commands in a Container with kubectl exec" href="/docs/user-guide/getting-into-containers/"></a>
    <a class="item" data-title="The Lifecycle of a Pod" href="/docs/user-guide/pod-states/"></a>
    <a class="item" data-title="Assigning Pods to Nodes" href="/docs/user-guide/node-selection/"></a>
    <a class="item" data-title="Creating Pods with the Downward API" href="/docs/user-guide/downward-api/"></a>
    <a class="item" data-title="Updating Live Pods" href="/docs/user-guide/update-demo/"></a>
    <a class="item" data-title="Installing a Kubernetes Master Node via Docker" href="/docs/getting-started-guides/docker-multinode/master/"></a>
    <a class="item" data-title="Adding a Kubernetes Worker Node via Docker" href="/docs/getting-started-guides/docker-multinode/worker/"></a>
  </div>
</div>
<div class="item" data-title="Networking">
  <div class="container">
    <a class="item" data-title="Networking in Kubernetes" href="/docs/admin/networking/"></a>
    <a class="item" data-title="Using DNS Pods and Services" href="/docs/admin/dns/"></a>
    <a class="item" data-title="Setting Up and Configuring DNS" href="https://github.com/kubernetes/kubernetes/tree/release-1.1/examples/cluster-dns" target='_blank'></a>
    <a class="item" data-title="Deploying DNS" href="/docs/getting-started-guides/docker-multinode/deployDNS/"></a>
    <a class="item" data-title="Connecting Applications" href="/docs/user-guide/connecting-applications/"></a>
    <a class="item" data-title="Creating Servers with External IPs" href="https://github.com/kubernetes/kubernetes/blob/release-1.1/examples/simple-nginx.md" target='_blank'></a>
    <a class="item" data-title="Connect with Proxies" href="/docs/user-guide/connecting-to-applications-proxy/"></a>
    <a class="item" data-title="Connect with Port Forwarding" href="/docs/user-guide/connecting-to-applications-port-forward/"></a>
    <a class="item" data-title="Configuring Your Cloud Provider's Firewalls" href="/docs/user-guide/services-firewalls/"></a>
  </div>
</div>
<div class="item" data-title="Configuring Kubernetes">
  <div class="container">
    <a class="item" data-title="Using Configuration Files" href="/docs/user-guide/simple-yaml/"></a>
    <a class="item" data-title="Best Practices for Configuration" href="/docs/user-guide/config-best-practices/"></a>
    <a class="item" data-title="Configuring Containers" href="/docs/user-guide/configuring-containers/"></a>
    <a class="item" data-title="Sharing Cluster Access with kubeconfig" href="/docs/user-guide/sharing-clusters/"></a>
    <a class="item" data-title="Using Environment Variables" href="/docs/user-guide/environment-guide/"></a>
    <a class="item" data-title="Managing Compute Resources" href="/docs/user-guide/compute-resources/"></a>
    <a class="item" data-title="Using kubectl to Manage Resources" href="/docs/user-guide/working-with-resources/"></a>
    <a class="item" data-title="Applying Resource Quotas and Limits" href="/docs/admin/resourcequota/"></a>
    <a class="item" data-title="Setting Pod CPU and Memory Limits" href="/docs/admin/limitrange/"></a>
    <a class="item" data-title="Configuring Garbage Collection" href="/docs/admin/garbage-collection/"></a>
    <a class="item" data-title="Configuring Kubernetes with Salt" href="/docs/admin/salt/"></a>
    <a class="item" data-title="Configuring Kubernetes Use of etcd" href="/docs/admin/etcd/"></a>
  </div>
</div>
<div class="item" data-title="Application Management and Deployment">
  <div class="container">
    <a class="item" data-title="Managing Applications: Prerequisites" href="/docs/user-guide/prereqs/"></a>
    <a class="item" data-title="Managing Deployments" href="/docs/user-guide/managing-deployments/"></a>
    <a class="item" data-title="Deploying Applications" href="/docs/user-guide/deploying-applications/"></a>
    <a class="item" data-title="Launching, Exposing, and Killing Applications" href="/docs/user-guide/quick-start/"></a>
  </div>
</div>
<div class="item" data-title="Testing and Monitoring">
  <div class="container">
    <a class="item" data-title="Testing a Kubernetes Cluster" href="/docs/getting-started-guides/docker-multinode/testing/"></a>
    <a class="item" data-title="Simulating Large Test Loads" href="https://github.com/kubernetes/kubernetes/tree/release-1.1/examples/k8petstore" target='_blank'></a>
    <a class="item" data-title="Checking Pod Health" href="/docs/user-guide/liveness/"></a>
    <a class="item" data-title="Using Explorer to Examine the Runtime Environment" href="https://github.com/kubernetes/kubernetes/tree/release-1.1/examples/explorer" target='_blank'></a>
    <a class="item" data-title="Resource Usage Monitoring" href="/docs/user-guide/monitoring/"></a>
    <a class="item" data-title="Logging" href="/docs/getting-started-guides/logging/"></a>
    <a class="item" data-title="Logging with Elasticsearch and Kibana" href="/docs/getting-started-guides/logging-elasticsearch/"></a>
  </div>
</div>
        </div> <!-- /pi-accordion -->
	</div> <!-- /docsToc -->
	<div id="docsContent">
        <p><a href="/docs/editdocs#docs/getting-started-guides/juju.md" id="editPageButton">Edit This Page</a></p>
    	<h1>Juju</h1>
		<p><a href="https://jujucharms.com/docs/stable/about-juju">Juju</a> makes it easy to deploy
Kubernetes by provisioning, installing and configuring all the systems in
the cluster.  Once deployed the cluster can easily scale up with one command
to increase the cluster size.</p>

<ul id="markdown-toc">
  <li><a href="#prerequisites" id="markdown-toc-prerequisites">Prerequisites</a>    <ul>
      <li><a href="#on-ubuntu" id="markdown-toc-on-ubuntu">On Ubuntu</a></li>
      <li><a href="#with-docker" id="markdown-toc-with-docker">With Docker</a></li>
    </ul>
  </li>
  <li><a href="#launch-kubernetes-cluster" id="markdown-toc-launch-kubernetes-cluster">Launch Kubernetes cluster</a></li>
  <li><a href="#exploring-the-cluster" id="markdown-toc-exploring-the-cluster">Exploring the cluster</a></li>
  <li><a href="#run-some-containers" id="markdown-toc-run-some-containers">Run some containers!</a></li>
  <li><a href="#scale-out-cluster" id="markdown-toc-scale-out-cluster">Scale out cluster</a></li>
  <li><a href="#launch-the-k8petstore-example-app" id="markdown-toc-launch-the-k8petstore-example-app">Launch the “k8petstore” example app</a></li>
  <li><a href="#tear-down-cluster" id="markdown-toc-tear-down-cluster">Tear down cluster</a></li>
  <li><a href="#more-info" id="markdown-toc-more-info">More Info</a>    <ul>
      <li><a href="#cloud-compatibility" id="markdown-toc-cloud-compatibility">Cloud compatibility</a></li>
    </ul>
  </li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>

<blockquote>
  <p>Note: If you’re running kube-up, on Ubuntu - all of the dependencies
will be handled for you. You may safely skip to the section:
<a href="#launch-kubernetes-cluster">Launch Kubernetes Cluster</a></p>
</blockquote>

<h3 id="on-ubuntu">On Ubuntu</h3>

<p><a href="https://jujucharms.com/get-started">Install the Juju client</a> on your
local Ubuntu system:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo add-apt-repository ppa:juju/stable
sudo apt-get update
sudo apt-get install juju-core juju-quickstart
</code></pre>
</div>

<h3 id="with-docker">With Docker</h3>

<p>If you are not using Ubuntu or prefer the isolation of Docker, you may
run the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mkdir ~/.juju
sudo docker run -v ~/.juju:/home/ubuntu/.juju -ti jujusolutions/jujubox:latest
</code></pre>
</div>

<p>At this point from either path you will have access to the <code class="highlighter-rouge">juju
quickstart</code> command.</p>

<p>To set up the credentials for your chosen cloud run:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>juju quickstart --constraints<span class="o">=</span><span class="s2">"mem=3.75G"</span> -i
</code></pre>
</div>

<blockquote>
  <p>The <code class="highlighter-rouge">constraints</code> flag is optional, it changes the size of virtual machines
that Juju will generate when it requests a new machine.  Larger machines
will run faster but cost more money than smaller machines.</p>
</blockquote>

<p>Follow the dialogue and choose <code class="highlighter-rouge">save</code> and <code class="highlighter-rouge">use</code>.  Quickstart will now
bootstrap the juju root node and setup the juju web based user
interface.</p>

<h2 id="launch-kubernetes-cluster">Launch Kubernetes cluster</h2>

<p>You will need to export the <code class="highlighter-rouge">KUBERNETES_PROVIDER</code> environment variable before
bringing up the cluster.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>juju
cluster/kube-up.sh
</code></pre>
</div>

<p>If this is your first time running the <code class="highlighter-rouge">kube-up.sh</code> script, it will install
the required dependencies to get started with Juju, additionally it will
launch a curses based configuration utility allowing you to select your cloud
provider and enter the proper access credentials.</p>

<p>Next it will deploy the kubernetes master, etcd, 2 nodes with flannel based
Software Defined Networking (SDN) so containers on different hosts can
communicate with each other.</p>

<h2 id="exploring-the-cluster">Exploring the cluster</h2>

<p>The <code class="highlighter-rouge">juju status</code> command provides information about each unit in the cluster:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>juju status --format<span class="o">=</span>oneline
- docker/0: 52.4.92.78 <span class="o">(</span>started<span class="o">)</span>
  - flannel-docker/0: 52.4.92.78 <span class="o">(</span>started<span class="o">)</span>
  - kubernetes/0: 52.4.92.78 <span class="o">(</span>started<span class="o">)</span>
- docker/1: 52.6.104.142 <span class="o">(</span>started<span class="o">)</span>
  - flannel-docker/1: 52.6.104.142 <span class="o">(</span>started<span class="o">)</span>
  - kubernetes/1: 52.6.104.142 <span class="o">(</span>started<span class="o">)</span>
- etcd/0: 52.5.216.210 <span class="o">(</span>started<span class="o">)</span> 4001/tcp
- juju-gui/0: 52.5.205.174 <span class="o">(</span>started<span class="o">)</span> 80/tcp, 443/tcp
- kubernetes-master/0: 52.6.19.238 <span class="o">(</span>started<span class="o">)</span> 8080/tcp
</code></pre>
</div>

<p>You can use <code class="highlighter-rouge">juju ssh</code> to access any of the units:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>juju ssh kubernetes-master/0
</code></pre>
</div>

<h2 id="run-some-containers">Run some containers!</h2>

<p><code class="highlighter-rouge">kubectl</code> is available on the Kubernetes master node.  We’ll ssh in to
launch some containers, but one could use <code class="highlighter-rouge">kubectl</code> locally by setting
<code class="highlighter-rouge">KUBERNETES_MASTER</code> to point at the ip address of “kubernetes-master/0”.</p>

<p>No pods will be available before starting a container:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>kubectl get pods
NAME READY STATUSRESTARTS   AGE

kubectl get replicationcontrollers
CONTROLLER  CONTAINER<span class="o">(</span>S<span class="o">)</span>  IMAGE<span class="o">(</span>S<span class="o">)</span>  SELECTOR  REPLICAS
</code></pre>
</div>

<p>We’ll follow the aws-coreos example. Create a pod manifest: <code class="highlighter-rouge">pod.json</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pod"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello"</span><span class="p">,</span><span class="w">
</span><span class="nt">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"environment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testing"</span><span class="w">
</span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"spec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="nt">"containers"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quay.io/kelseyhightower/hello"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ports"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
</span><span class="nt">"containerPort"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w">
</span><span class="nt">"hostPort"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Create the pod with kubectl:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>kubectl create -f pod.json
</code></pre>
</div>

<p>Get info on the pod:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>kubectl get pods
</code></pre>
</div>

<p>To test the hello app, we need to locate which node is hosting
the container. Better tooling for using Juju to introspect container
is in the works but we can use <code class="highlighter-rouge">juju run</code> and <code class="highlighter-rouge">juju status</code> to find
our hello app.</p>

<p>Exit out of our ssh session and run:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>juju run --unit kubernetes/0 <span class="s2">"docker ps -n=1"</span>
...
juju run --unit kubernetes/1 <span class="s2">"docker ps -n=1"</span>
CONTAINER IDIMAGE  COMMAND CREATED STATUS  PORTS   NAMES
02beb61339d8quay.io/kelseyhightower/hello:latest   /hello  About an hour ago   Up About an hourk8s_hello....
</code></pre>
</div>

<p>We see “kubernetes/1” has our container, we can open port 80:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>juju run --unit kubernetes/1 <span class="s2">"open-port 80"</span>
juju expose kubernetes
sudo apt-get install curl
curl <span class="k">$(</span>juju status --format<span class="o">=</span>oneline kubernetes/1 | cut -d<span class="s1">' '</span> -f3<span class="k">)</span>
</code></pre>
</div>

<p>Finally delete the pod:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>juju ssh kubernetes-master/0
kubectl delete pods hello
</code></pre>
</div>

<h2 id="scale-out-cluster">Scale out cluster</h2>

<p>We can add node units like so:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>juju add-unit docker <span class="c"># creates unit docker/2, kubernetes/2, docker-flannel/2</span>
</code></pre>
</div>

<h2 id="launch-the-k8petstore-example-app">Launch the “k8petstore” example app</h2>

<p>The <a href="https://github.com/kubernetes/kubernetes/tree/release-1.1/examples/k8petstore/">k8petstore example</a> is available as a
<a href="https://jujucharms.com/docs/devel/actions">juju action</a>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>juju action <span class="k">do </span>kubernetes-master/0
</code></pre>
</div>

<blockquote>
  <p>Note: this example includes curl statements to exercise the app, which
automatically generates “petstore” transactions written to redis, and allows
you to visualize the throughput in your browser.</p>
</blockquote>

<h2 id="tear-down-cluster">Tear down cluster</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>./kube-down.sh
</code></pre>
</div>

<p>or destroy your current Juju environment (using the <code class="highlighter-rouge">juju env</code> command):</p>

<div class="highlighter-rouge"><pre class="highlight"><code>juju destroy-environment --force <span class="sb">`</span>juju env<span class="sb">`</span>
</code></pre>
</div>

<h2 id="more-info">More Info</h2>

<p>The Kubernetes charms and bundles can be found in the <code class="highlighter-rouge">kubernetes</code> project on
github.com:</p>

<ul>
  <li><a href="http://releases.k8s.io/release-1.1/cluster/juju/bundles">Bundle Repository</a>
    <ul>
      <li><a href="https://releases.k8s.io/release-1.1/cluster/juju/charms/trusty/kubernetes-master">Kubernetes master charm</a></li>
      <li><a href="https://releases.k8s.io/release-1.1/cluster/juju/charms/trusty/kubernetes">Kubernetes node charm</a></li>
    </ul>
  </li>
  <li><a href="https://jujucharms.com">More about Juju</a></li>
</ul>

<h3 id="cloud-compatibility">Cloud compatibility</h3>

<p>Juju runs natively against a variety of public cloud providers. Juju currently
works with:</p>

<ul>
  <li><a href="https://jujucharms.com/docs/stable/config-aws">Amazon Web Service</a></li>
  <li><a href="https://jujucharms.com/docs/stable/config-azure">Windows Azure</a></li>
  <li><a href="https://jujucharms.com/docs/stable/config-digitalocean">DigitalOcean</a></li>
  <li><a href="https://jujucharms.com/docs/stable/config-gce">Google Compute Engine</a></li>
  <li><a href="https://jujucharms.com/docs/stable/config-hpcloud">HP Public Cloud</a></li>
  <li><a href="https://jujucharms.com/docs/stable/config-joyent">Joyent</a></li>
  <li><a href="https://jujucharms.com/docs/stable/config-LXC">LXC</a></li>
  <li>Any <a href="https://jujucharms.com/docs/stable/config-openstack">OpenStack</a> deployment</li>
  <li><a href="https://jujucharms.com/docs/stable/config-vagrant">Vagrant</a></li>
  <li><a href="https://jujucharms.com/docs/stable/config-vmware">Vmware vSphere</a></li>
</ul>

<p>If you do not see your favorite cloud provider listed many clouds can be
configured for <a href="https://jujucharms.com/docs/stable/config-manual">manual provisioning</a>.</p>

<p>The Kubernetes bundle has been tested on GCE and AWS and found to work with
version 1.0.0.</p>

        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/getting-started-guides/juju.md?pixel" alt="Analytics" /></a>
        <div id="pd_rating_holder_8345992"></div>
		<script type="text/javascript">
        PDRTJS_settings_8345992 = {
        "id" : "8345992",
        "unique_id" : "/docs/getting-started-guides/juju/",
        "title" : "Juju",
        "permalink" : "http://kubernetes.github.io/docs/getting-started-guides/juju/"
        };
        (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
	</div>
</section>

<footer>
	<main class="light-text">
		<nav>
			<a href="/docs/hellonode/">Get Started</a>
			<a href="/docs/">Documentation</a>
			<a href="http://blog.kubernetes.io/">Blog</a>
			<a href="/community/">Community</a>
		</nav>
		<div class="social">
			<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
			<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
			<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
			<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>stackoverflow</span></a>
			<a href="https://groups.google.com/forum/#!forum/google-containers" class="mailing-list"><span>Mailing List</span></a>
			<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
			<label for="wishField">I wish this page <input type="text" id="wishField" name="wishField" placeholder="enter your wish"></label>
		</div>
		<div class="center">&copy; 2016 Kubernetes</div>
	</main>
</footer>



<style>
	.cse .gsc-control-cse, .gsc-control-cse {
		padding: 0;
	}

	.gsc-above-wrapper-area {
		border-bottom: 0;
	}
</style>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36037335-10', 'auto');
  ga('send', 'pageview');
</script>
<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
<!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->
-->
</body>
</html>